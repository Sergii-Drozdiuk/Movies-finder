import{u as w,r as s,a as b,j as e,N as l,L as p,O as D}from"./index-f0272787.js";import{E as L,g as y}from"./Error-c3e8783a.js";const F=()=>{var m;const v=w(),c=s.useRef(((m=v.state)==null?void 0:m.from)??"/"),[o,f]=s.useState({}),[g,a]=s.useState(!1),[E,d]=s.useState(!1),{id:x}=b();s.useEffect(()=>{const t=new AbortController;return(async()=>{try{a(!0),d(!1);const r=await y(x,t.signal);f(r),a(!1)}catch(r){r&&r.message!=="canceled"&&(a(!1),d(!0))}})(),()=>{t.abort()}},[x]);const M=s.useMemo(()=>!!Object.keys(o).length,[o]),{poster_path:h,original_title:j,vote_average:i,overview:N,genres:n}=o;return e.jsxs(e.Fragment,{children:[e.jsx(l,{to:c.current,className:"hover:underline",children:c.current?e.jsx("p",{children:"Go back"}):e.jsx("p",{children:"Go home"})}),g&&e.jsx(p,{}),E&&e.jsx(L,{textError:"Movie has not founded. Please, choose another movie"}),M&&e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{children:[h&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w300/${h}`,alt:`${j}`,className:"m-auto rounded-lg"}),e.jsxs("div",{children:[e.jsx("h2",{className:"m-auto text-lg",children:j}),e.jsxs("p",{children:["User Score: ",e.jsxs("span",{children:[" ",i==null?void 0:i.toFixed(2)," %"]})]}),e.jsx("h3",{children:"Overview"}),e.jsx("p",{className:"text-xs",children:N}),e.jsx("h3",{children:"Genres"}),e.jsx("ul",{children:n==null?void 0:n.map(({id:t,name:u})=>e.jsxs("li",{className:"text-xs",children:[" ",u]},t))})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Additional information"}),e.jsxs("div",{children:[e.jsx(l,{to:"cast",children:"Cast"}),e.jsx(l,{to:"reviews",children:"Reviews"})]})]})]}),e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(D,{})})]})};export{F as default};
