import{R as z,r as le,j as $,Q as He,u as vr,a as br,L as _r}from"./index-df1e73e3.js";import{P as We,E as xr,a as Vr}from"./Error-a36c1401.js";import{M as Ar}from"./MoviesList-ecf69b4a.js";var oe=e=>e.type==="checkbox",se=e=>e instanceof Date,T=e=>e==null;const rr=e=>typeof e=="object";var p=e=>!T(e)&&!Array.isArray(e)&&rr(e)&&!se(e),mr=e=>p(e)&&e.target?oe(e.target)?e.target.checked:e.target.value:e,wr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Fr=(e,i)=>e.has(wr(i)),Sr=e=>{const i=e.constructor&&e.constructor.prototype;return p(i)&&i.hasOwnProperty("isPrototypeOf")},Le=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function W(e){let i;const s=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Le&&(e instanceof Blob||e instanceof FileList))&&(s||p(e)))if(i=s?[]:{},!s&&!Sr(e))i=e;else for(const t in e)e.hasOwnProperty(t)&&(i[t]=W(e[t]));else return e;return i}var ce=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,d=(e,i,s)=>{if(!i||!p(e))return s;const t=ce(i.split(/[,[\].]+?/)).reduce((l,a)=>T(l)?l:l[a],e);return D(t)||t===e?D(e[i])?s:e[i]:t},Y=e=>typeof e=="boolean";const $e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},P={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},H={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};z.createContext(null);var Dr=(e,i,s,t=!0)=>{const l={defaultValues:i._defaultValues};for(const a in e)Object.defineProperty(l,a,{get:()=>{const f=a;return i._proxyFormState[f]!==P.all&&(i._proxyFormState[f]=!t||P.all),s&&(s[f]=!0),e[f]}});return l},N=e=>p(e)&&!Object.keys(e).length,pr=(e,i,s,t)=>{s(e);const{name:l,...a}=e;return N(a)||Object.keys(a).length>=Object.keys(i).length||Object.keys(a).find(f=>i[f]===(!t||P.all))},Fe=e=>Array.isArray(e)?e:[e];function kr(e){const i=z.useRef(e);i.current=e,z.useEffect(()=>{const s=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var q=e=>typeof e=="string",Er=(e,i,s,t,l)=>q(e)?(t&&i.watch.add(e),d(s,e,l)):Array.isArray(e)?e.map(a=>(t&&i.watch.add(a),d(s,a))):(t&&(i.watchAll=!0),s),Te=e=>/^\w*$/.test(e),tr=e=>ce(e.replace(/["|']|\]/g,"").split(/\.|\[/));function A(e,i,s){let t=-1;const l=Te(i)?[i]:tr(i),a=l.length,f=a-1;for(;++t<a;){const _=l[t];let x=s;if(t!==f){const L=e[_];x=p(L)||Array.isArray(L)?L:isNaN(+l[t+1])?{}:[]}e[_]=x,e=e[_]}return e}var Lr=(e,i,s,t,l)=>i?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[t]:l||!0}}:{};const Ee=(e,i,s)=>{for(const t of s||Object.keys(e)){const l=d(e,t);if(l){const{_f:a,...f}=l;if(a&&i(a.name)){if(a.ref.focus){a.ref.focus();break}else if(a.refs&&a.refs[0].focus){a.refs[0].focus();break}}else p(f)&&Ee(f,i)}}};var Ke=e=>({isOnSubmit:!e||e===P.onSubmit,isOnBlur:e===P.onBlur,isOnChange:e===P.onChange,isOnAll:e===P.all,isOnTouch:e===P.onTouched}),ze=(e,i,s)=>!s&&(i.watchAll||i.watch.has(e)||[...i.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))),Tr=(e,i,s)=>{const t=ce(d(e,s));return A(t,"root",i[s]),A(e,s,t),e},Oe=e=>e.type==="file",G=e=>typeof e=="function",ye=e=>{if(!Le)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},de=e=>q(e),Ce=e=>e.type==="radio",he=e=>e instanceof RegExp;const Ge={value:!1,isValid:!1},Je={value:!0,isValid:!0};var sr=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Je:{value:e[0].value,isValid:!0}:Je:Ge}return Ge};const Xe={isValid:!1,value:null};var ir=e=>Array.isArray(e)?e.reduce((i,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:i,Xe):Xe;function Ye(e,i,s="validate"){if(de(e)||Array.isArray(e)&&e.every(de)||Y(e)&&!e)return{type:s,message:de(e)?e:"",ref:i}}var te=e=>p(e)&&!he(e)?e:{value:e,message:""},Ze=async(e,i,s,t,l)=>{const{ref:a,refs:f,required:_,maxLength:x,minLength:L,min:I,max:S,pattern:g,validate:K,name:C,valueAsNumber:be,mount:fe,disabled:_e}=e._f,v=d(i,C);if(!fe||_e)return{};const R=f?f[0]:a,j=V=>{t&&R.reportValidity&&(R.setCustomValidity(Y(V)?"":V||""),R.reportValidity())},k={},ie=Ce(a),ee=oe(a),xe=ie||ee,U=(be||Oe(a))&&D(a.value)&&D(v)||ye(a)&&a.value===""||v===""||Array.isArray(v)&&!v.length,J=Lr.bind(null,C,s,k),Q=(V,b,w,O=H.maxLength,M=H.minLength)=>{const B=V?b:w;k[C]={type:V?O:M,message:B,ref:a,...J(V?O:M,B)}};if(l?!Array.isArray(v)||!v.length:_&&(!xe&&(U||T(v))||Y(v)&&!v||ee&&!sr(f).isValid||ie&&!ir(f).isValid)){const{value:V,message:b}=de(_)?{value:!!_,message:_}:te(_);if(V&&(k[C]={type:H.required,message:b,ref:R,...J(H.required,b)},!s))return j(b),k}if(!U&&(!T(I)||!T(S))){let V,b;const w=te(S),O=te(I);if(!T(v)&&!isNaN(v)){const M=a.valueAsNumber||v&&+v;T(w.value)||(V=M>w.value),T(O.value)||(b=M<O.value)}else{const M=a.valueAsDate||new Date(v),B=ue=>new Date(new Date().toDateString()+" "+ue),X=a.type=="time",ne=a.type=="week";q(w.value)&&v&&(V=X?B(v)>B(w.value):ne?v>w.value:M>new Date(w.value)),q(O.value)&&v&&(b=X?B(v)<B(O.value):ne?v<O.value:M<new Date(O.value))}if((V||b)&&(Q(!!V,w.message,O.message,H.max,H.min),!s))return j(k[C].message),k}if((x||L)&&!U&&(q(v)||l&&Array.isArray(v))){const V=te(x),b=te(L),w=!T(V.value)&&v.length>+V.value,O=!T(b.value)&&v.length<+b.value;if((w||O)&&(Q(w,V.message,b.message),!s))return j(k[C].message),k}if(g&&!U&&q(v)){const{value:V,message:b}=te(g);if(he(V)&&!v.match(V)&&(k[C]={type:H.pattern,message:b,ref:a,...J(H.pattern,b)},!s))return j(b),k}if(K){if(G(K)){const V=await K(v,i),b=Ye(V,R);if(b&&(k[C]={...b,...J(H.validate,b.message)},!s))return j(b.message),k}else if(p(K)){let V={};for(const b in K){if(!N(V)&&!s)break;const w=Ye(await K[b](v,i),R,b);w&&(V={...w,...J(b,w.message)},j(w.message),s&&(k[C]=V))}if(!N(V)&&(k[C]={ref:R,...V},!s))return k}}return j(!0),k};function Or(e,i){const s=i.slice(0,-1).length;let t=0;for(;t<s;)e=D(e)?t++:e[i[t++]];return e}function Cr(e){for(const i in e)if(e.hasOwnProperty(i)&&!D(e[i]))return!1;return!0}function E(e,i){const s=Array.isArray(i)?i:Te(i)?[i]:tr(i),t=s.length===1?e:Or(e,s),l=s.length-1,a=s[l];return t&&delete t[a],l!==0&&(p(t)&&N(t)||Array.isArray(t)&&Cr(t))&&E(e,s.slice(0,-1)),e}function Se(){let e=[];return{get observers(){return e},next:l=>{for(const a of e)a.next&&a.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(a=>a!==l)}}),unsubscribe:()=>{e=[]}}}var ge=e=>T(e)||!rr(e);function Z(e,i){if(ge(e)||ge(i))return e===i;if(se(e)&&se(i))return e.getTime()===i.getTime();const s=Object.keys(e),t=Object.keys(i);if(s.length!==t.length)return!1;for(const l of s){const a=e[l];if(!t.includes(l))return!1;if(l!=="ref"){const f=i[l];if(se(a)&&se(f)||p(a)&&p(f)||Array.isArray(a)&&Array.isArray(f)?!Z(a,f):a!==f)return!1}}return!0}var nr=e=>e.type==="select-multiple",Mr=e=>Ce(e)||oe(e),De=e=>ye(e)&&e.isConnected,ur=e=>{for(const i in e)if(G(e[i]))return!0;return!1};function ve(e,i={}){const s=Array.isArray(e);if(p(e)||s)for(const t in e)Array.isArray(e[t])||p(e[t])&&!ur(e[t])?(i[t]=Array.isArray(e[t])?[]:{},ve(e[t],i[t])):T(e[t])||(i[t]=!0);return i}function ar(e,i,s){const t=Array.isArray(e);if(p(e)||t)for(const l in e)Array.isArray(e[l])||p(e[l])&&!ur(e[l])?D(i)||ge(s[l])?s[l]=Array.isArray(e[l])?ve(e[l],[]):{...ve(e[l])}:ar(e[l],T(i)?{}:i[l],s[l]):s[l]=!Z(e[l],i[l]);return s}var pe=(e,i)=>ar(e,i,ve(i)),lr=(e,{valueAsNumber:i,valueAsDate:s,setValueAs:t})=>D(e)?e:i?e===""?NaN:e&&+e:s&&q(e)?new Date(e):t?t(e):e;function ke(e){const i=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):i.disabled))return Oe(i)?i.files:Ce(i)?ir(e.refs).value:nr(i)?[...i.selectedOptions].map(({value:s})=>s):oe(i)?sr(e.refs).value:lr(D(i.value)?e.ref.value:i.value,e)}var Nr=(e,i,s,t)=>{const l={};for(const a of e){const f=d(i,a);f&&A(l,a,f._f)}return{criteriaMode:s,names:[...e],fields:l,shouldUseNativeValidation:t}},ae=e=>D(e)?e:he(e)?e.source:p(e)?he(e.value)?e.value.source:e.value:e,Rr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function er(e,i,s){const t=d(e,s);if(t||Te(s))return{error:t,name:s};const l=s.split(".");for(;l.length;){const a=l.join("."),f=d(i,a),_=d(e,a);if(f&&!Array.isArray(f)&&s!==a)return{name:s};if(_&&_.type)return{name:a,error:_};l.pop()}return{name:s}}var Pr=(e,i,s,t,l)=>l.isOnAll?!1:!s&&l.isOnTouch?!(i||e):(s?t.isOnBlur:l.isOnBlur)?!e:(s?t.isOnChange:l.isOnChange)?e:!0,Ur=(e,i)=>!ce(d(e,i)).length&&E(e,i);const Br={mode:P.onSubmit,reValidateMode:P.onChange,shouldFocusError:!0};function qr(e={},i){let s={...Br,...e},t={submitCount:0,isDirty:!1,isLoading:G(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},a=p(s.defaultValues)||p(s.values)?W(s.defaultValues||s.values)||{}:{},f=s.shouldUnregister?{}:W(a),_={action:!1,mount:!1,watch:!1},x={mount:new Set,unMount:new Set,array:new Set,watch:new Set},L,I=0;const S={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:Se(),array:Se(),state:Se()},K=e.resetOptions&&e.resetOptions.keepDirtyValues,C=Ke(s.mode),be=Ke(s.reValidateMode),fe=s.criteriaMode===P.all,_e=r=>n=>{clearTimeout(I),I=setTimeout(r,n)},v=async r=>{if(S.isValid||r){const n=s.resolver?N((await U()).errors):await Q(l,!0);n!==t.isValid&&g.state.next({isValid:n})}},R=r=>S.isValidating&&g.state.next({isValidating:r}),j=(r,n=[],u,y,c=!0,o=!0)=>{if(y&&u){if(_.action=!0,o&&Array.isArray(d(l,r))){const h=u(d(l,r),y.argA,y.argB);c&&A(l,r,h)}if(o&&Array.isArray(d(t.errors,r))){const h=u(d(t.errors,r),y.argA,y.argB);c&&A(t.errors,r,h),Ur(t.errors,r)}if(S.touchedFields&&o&&Array.isArray(d(t.touchedFields,r))){const h=u(d(t.touchedFields,r),y.argA,y.argB);c&&A(t.touchedFields,r,h)}S.dirtyFields&&(t.dirtyFields=pe(a,f)),g.state.next({name:r,isDirty:b(r,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else A(f,r,n)},k=(r,n)=>{A(t.errors,r,n),g.state.next({errors:t.errors})},ie=(r,n,u,y)=>{const c=d(l,r);if(c){const o=d(f,r,D(u)?d(a,r):u);D(o)||y&&y.defaultChecked||n?A(f,r,n?o:ke(c._f)):M(r,o),_.mount&&v()}},ee=(r,n,u,y,c)=>{let o=!1,h=!1;const m={name:r};if(!u||y){S.isDirty&&(h=t.isDirty,t.isDirty=m.isDirty=b(),o=h!==m.isDirty);const F=Z(d(a,r),n);h=d(t.dirtyFields,r),F?E(t.dirtyFields,r):A(t.dirtyFields,r,!0),m.dirtyFields=t.dirtyFields,o=o||S.dirtyFields&&h!==!F}if(u){const F=d(t.touchedFields,r);F||(A(t.touchedFields,r,u),m.touchedFields=t.touchedFields,o=o||S.touchedFields&&F!==u)}return o&&c&&g.state.next(m),o?m:{}},xe=(r,n,u,y)=>{const c=d(t.errors,r),o=S.isValid&&Y(n)&&t.isValid!==n;if(e.delayError&&u?(L=_e(()=>k(r,u)),L(e.delayError)):(clearTimeout(I),L=null,u?A(t.errors,r,u):E(t.errors,r)),(u?!Z(c,u):c)||!N(y)||o){const h={...y,...o&&Y(n)?{isValid:n}:{},errors:t.errors,name:r};t={...t,...h},g.state.next(h)}R(!1)},U=async r=>s.resolver(f,s.context,Nr(r||x.mount,l,s.criteriaMode,s.shouldUseNativeValidation)),J=async r=>{const{errors:n}=await U(r);if(r)for(const u of r){const y=d(n,u);y?A(t.errors,u,y):E(t.errors,u)}else t.errors=n;return n},Q=async(r,n,u={valid:!0})=>{for(const y in r){const c=r[y];if(c){const{_f:o,...h}=c;if(o){const m=x.array.has(o.name),F=await Ze(c,f,fe,s.shouldUseNativeValidation&&!n,m);if(F[o.name]&&(u.valid=!1,n))break;!n&&(d(F,o.name)?m?Tr(t.errors,F,o.name):A(t.errors,o.name,F[o.name]):E(t.errors,o.name))}h&&await Q(h,n,u)}}return u.valid},V=()=>{for(const r of x.unMount){const n=d(l,r);n&&(n._f.refs?n._f.refs.every(u=>!De(u)):!De(n._f.ref))&&Ve(r)}x.unMount=new Set},b=(r,n)=>(r&&n&&A(f,r,n),!Z(Me(),a)),w=(r,n,u)=>Er(r,x,{..._.mount?f:D(n)?a:q(r)?{[r]:n}:n},u,n),O=r=>ce(d(_.mount?f:a,r,e.shouldUnregister?d(a,r,[]):[])),M=(r,n,u={})=>{const y=d(l,r);let c=n;if(y){const o=y._f;o&&(!o.disabled&&A(f,r,lr(n,o)),c=ye(o.ref)&&T(n)?"":n,nr(o.ref)?[...o.ref.options].forEach(h=>h.selected=c.includes(h.value)):o.refs?oe(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(c)?!!c.find(m=>m===h.value):c===h.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(h=>h.checked=h.value===c):Oe(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||g.values.next({name:r,values:{...f}})))}(u.shouldDirty||u.shouldTouch)&&ee(r,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ue(r)},B=(r,n,u)=>{for(const y in n){const c=n[y],o=`${r}.${y}`,h=d(l,o);(x.array.has(r)||!ge(c)||h&&!h._f)&&!se(c)?B(o,c,u):M(o,c,u)}},X=(r,n,u={})=>{const y=d(l,r),c=x.array.has(r),o=W(n);A(f,r,o),c?(g.array.next({name:r,values:{...f}}),(S.isDirty||S.dirtyFields)&&u.shouldDirty&&g.state.next({name:r,dirtyFields:pe(a,f),isDirty:b(r,o)})):y&&!y._f&&!T(o)?B(r,o,u):M(r,o,u),ze(r,x)&&g.state.next({...t}),g.values.next({name:r,values:{...f}}),!_.mount&&i()},ne=async r=>{const n=r.target;let u=n.name,y=!0;const c=d(l,u),o=()=>n.type?ke(c._f):mr(r);if(c){let h,m;const F=o(),re=r.type===$e.BLUR||r.type===$e.FOCUS_OUT,yr=!Rr(c._f)&&!s.resolver&&!d(t.errors,u)&&!c._f.deps||Pr(re,d(t.touchedFields,u),t.isSubmitted,be,C),me=ze(u,x,re);A(f,u,F),re?(c._f.onBlur&&c._f.onBlur(r),L&&L(0)):c._f.onChange&&c._f.onChange(r);const we=ee(u,F,re,!1),hr=!N(we)||me;if(!re&&g.values.next({name:u,type:r.type,values:{...f}}),yr)return S.isValid&&v(),hr&&g.state.next({name:u,...me?{}:we});if(!re&&me&&g.state.next({...t}),R(!0),s.resolver){const{errors:je}=await U([u]),gr=er(t.errors,l,u),Qe=er(je,l,gr.name||u);h=Qe.error,u=Qe.name,m=N(je)}else h=(await Ze(c,f,fe,s.shouldUseNativeValidation))[u],y=Number.isNaN(F)||F===d(f,u,F),y&&(h?m=!1:S.isValid&&(m=await Q(l,!0)));y&&(c._f.deps&&ue(c._f.deps),xe(u,m,h,we))}},ue=async(r,n={})=>{let u,y;const c=Fe(r);if(R(!0),s.resolver){const o=await J(D(r)?r:c);u=N(o),y=r?!c.some(h=>d(o,h)):u}else r?(y=(await Promise.all(c.map(async o=>{const h=d(l,o);return await Q(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!y&&!t.isValid)&&v()):y=u=await Q(l);return g.state.next({...!q(r)||S.isValid&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors,isValidating:!1}),n.shouldFocus&&!y&&Ee(l,o=>o&&d(t.errors,o),r?c:x.mount),y},Me=r=>{const n={...a,..._.mount?f:{}};return D(r)?n:q(r)?d(n,r):r.map(u=>d(n,u))},Ne=(r,n)=>({invalid:!!d((n||t).errors,r),isDirty:!!d((n||t).dirtyFields,r),isTouched:!!d((n||t).touchedFields,r),error:d((n||t).errors,r)}),cr=r=>{r&&Fe(r).forEach(n=>E(t.errors,n)),g.state.next({errors:r?t.errors:{}})},Re=(r,n,u)=>{const y=(d(l,r,{_f:{}})._f||{}).ref;A(t.errors,r,{...n,ref:y}),g.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&y&&y.focus&&y.focus()},fr=(r,n)=>G(r)?g.values.subscribe({next:u=>r(w(void 0,n),u)}):w(r,n,!0),Ve=(r,n={})=>{for(const u of r?Fe(r):x.mount)x.mount.delete(u),x.array.delete(u),n.keepValue||(E(l,u),E(f,u)),!n.keepError&&E(t.errors,u),!n.keepDirty&&E(t.dirtyFields,u),!n.keepTouched&&E(t.touchedFields,u),!s.shouldUnregister&&!n.keepDefaultValue&&E(a,u);g.values.next({values:{...f}}),g.state.next({...t,...n.keepDirty?{isDirty:b()}:{}}),!n.keepIsValid&&v()},Pe=({disabled:r,name:n,field:u,fields:y})=>{if(Y(r)){const c=r?void 0:d(f,n,ke(u?u._f:d(y,n)._f));A(f,n,c),ee(n,c,!1,!1,!0)}},Ae=(r,n={})=>{let u=d(l,r);const y=Y(n.disabled);return A(l,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...n}}),x.mount.add(r),u?Pe({field:u,disabled:n.disabled,name:r}):ie(r,!0,n.value),{...y?{disabled:n.disabled}:{},...s.progressive?{required:!!n.required,min:ae(n.min),max:ae(n.max),minLength:ae(n.minLength),maxLength:ae(n.maxLength),pattern:ae(n.pattern)}:{},name:r,onChange:ne,onBlur:ne,ref:c=>{if(c){Ae(r,n),u=d(l,r);const o=D(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=Mr(o),m=u._f.refs||[];if(h?m.find(F=>F===o):o===u._f.ref)return;A(l,r,{_f:{...u._f,...h?{refs:[...m.filter(De),o,...Array.isArray(d(a,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),ie(r,!1,void 0,o)}else u=d(l,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(Fr(x.array,r)&&_.action)&&x.unMount.add(r)}}},Ue=()=>s.shouldFocusError&&Ee(l,r=>r&&d(t.errors,r),x.mount),Be=(r,n)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let y=W(f);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:o}=await U();t.errors=c,y=o}else await Q(l);E(t.errors,"root"),N(t.errors)?(g.state.next({errors:{}}),await r(y,u)):(n&&await n({...t.errors},u),Ue(),setTimeout(Ue)),g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:N(t.errors),submitCount:t.submitCount+1,errors:t.errors})},dr=(r,n={})=>{d(l,r)&&(D(n.defaultValue)?X(r,d(a,r)):(X(r,n.defaultValue),A(a,r,n.defaultValue)),n.keepTouched||E(t.touchedFields,r),n.keepDirty||(E(t.dirtyFields,r),t.isDirty=n.defaultValue?b(r,d(a,r)):b()),n.keepError||(E(t.errors,r),S.isValid&&v()),g.state.next({...t}))},qe=(r,n={})=>{const u=r?W(r):a,y=W(u),c=r&&!N(r)?y:a;if(n.keepDefaultValues||(a=u),!n.keepValues){if(n.keepDirtyValues||K)for(const o of x.mount)d(t.dirtyFields,o)?A(c,o,d(f,o)):X(o,d(c,o));else{if(Le&&D(r))for(const o of x.mount){const h=d(l,o);if(h&&h._f){const m=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(ye(m)){const F=m.closest("form");if(F){F.reset();break}}}}l={}}f=e.shouldUnregister?n.keepDefaultValues?W(a):{}:W(c),g.array.next({values:{...c}}),g.values.next({values:{...c}})}x={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!_.mount&&i(),_.mount=!S.isValid||!!n.keepIsValid,_.watch=!!e.shouldUnregister,g.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:n.keepDirty?t.isDirty:!!(n.keepDefaultValues&&!Z(r,a)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:n.keepDirtyValues?t.dirtyFields:n.keepDefaultValues&&r?pe(a,r):{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitSuccessful:n.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ie=(r,n)=>qe(G(r)?r(f):r,n);return{control:{register:Ae,unregister:Ve,getFieldState:Ne,handleSubmit:Be,setError:Re,_executeSchema:U,_getWatch:w,_getDirty:b,_updateValid:v,_removeUnmounted:V,_updateFieldArray:j,_updateDisabledField:Pe,_getFieldArray:O,_reset:qe,_resetDefaultValues:()=>G(s.defaultValues)&&s.defaultValues().then(r=>{Ie(r,s.resetOptions),g.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_subjects:g,_proxyFormState:S,get _fields(){return l},get _formValues(){return f},get _state(){return _},set _state(r){_=r},get _defaultValues(){return a},get _names(){return x},set _names(r){x=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ue,register:Ae,handleSubmit:Be,watch:fr,setValue:X,getValues:Me,reset:Ie,resetField:dr,clearErrors:cr,unregister:Ve,setError:Re,setFocus:(r,n={})=>{const u=d(l,r),y=u&&u._f;if(y){const c=y.refs?y.refs[0]:y.ref;c.focus&&(c.focus(),n.shouldSelect&&c.select())}},getFieldState:Ne}}function Ir(e={}){const i=z.useRef(),s=z.useRef(),[t,l]=z.useState({isDirty:!1,isValidating:!1,isLoading:G(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:G(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...qr(e,()=>l(f=>({...f}))),formState:t});const a=i.current.control;return a._options=e,kr({subject:a._subjects.state,next:f=>{pr(f,a._proxyFormState,a._updateFormState,!0)&&l({...a._formState})}}),z.useEffect(()=>{e.values&&!Z(e.values,s.current)?(a._reset(e.values,a._options.resetOptions),s.current=e.values):a._resetDefaultValues()},[e.values,a]),z.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),i.current.formState=Dr(t,a),i.current}const or=({getQuery:e})=>{const{register:i,handleSubmit:s}=Ir(),[t,l]=le.useState(""),a=({query:f})=>{const _=f.toLowerCase().trim();if(!_){He.info("Please enter a search query");return}if(t===_){He.info("This query has done");return}l(_),e({query:_})};return $.jsxs("form",{onSubmit:s(a),className:"flex items-center justify-center gap-3 py-3",children:[$.jsx("input",{...i("query"),autoFocus:!0,placeholder:"Search movies",className:"border-2 border-[#3f51b5] px-3 rounded-lg"}),$.jsx("button",{type:"submit",className:"px-1 border-2 border-[#3f51b5] rounded-lg hover:bg-[#3f51b5] hover:text-white",children:"Search"})]})};or.propTypes={location:We.object,getQuery:We.func};const zr=()=>{const e=vr(),[i,s]=br(),[t,l]=le.useState([]),[a,f]=le.useState(!1),[_,x]=le.useState(!1);return le.useEffect(()=>{const L=i.get("query");if(!L)return;const I=new AbortController;return(async()=>{try{f(!0),x(!1);const g=await Vr(L,I.signal);l(g),f(!1)}catch(g){g&&g.message!=="canceled"&&(f(!1),x(!0))}})(),()=>{I.abort()}},[i]),$.jsxs("main",{children:[$.jsx(or,{getQuery:s}),a&&$.jsx(_r,{}),_&&$.jsx(xr,{textError:"Something went wrong. Please, try reloading the page."}),t.length!==0&&$.jsx(Ar,{moviesList:t,location:e}),t&&!t.length&&i.get("query")&&$.jsx("p",{className:"mt-3 text-center",children:"Sorry, but no results were found for your query. Try changing your search query."})]})};export{zr as default};
